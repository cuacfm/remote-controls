<!DOCTYPE HTML>
<!--
	Fractal by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
	  <!-- for Google -->
      <meta name="description" content="Escoita CUAC FM en Android ou iOS" />
      <meta name="keywords" content="CUAC FM, a coruña,streaming, online, escoita, rebelde, resiste, google play" />
        
      <meta name="author" content="CUAC FM" />
      <meta name="copyright" content="CUAC FM" />
      <meta name="application-name" content="Control remoto da emisora" />
        
      <!-- for Facebook -->          
      <meta property="og:title" content="Escoita CUAC FM en internet" />
      <meta property="og:type" content="article" />
      <meta property="og:image" content="https://cuacfm.org/apps/assets/css/images/cuac-resiste.jpg" />
      <meta property="og:url" content="https://cuacfm.org/" />
      <meta property="og:description" content="Control remoto da emisora" />
        
      <!-- for Twitter -->          
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:title" content="Control remoto da emisora" />
      <meta name="twitter:description" content="Control remoto da emisora" />
      <meta name="twitter:image" content="https://cuacfm.org/apps/assets/css/images/cuac-resiste.jpg" />
   		
      <!-- Android Phone -->
      <meta name="theme-color" content="#e6e6e6">
      <!-- Windows Phone -->
      <meta name="msapplication-navbutton-color" content="#e6e6e6">
      <!-- iOS Safari -->
      <meta name="apple-mobile-web-app-status-bar-style" content="#e6e6e6">
      <meta name="apple-mobile-web-app-capable" content="yes">
    
    
		<title>CUAC FM: Control remoto</title>
		<meta charset="utf-8" />
        <link rel="apple-touch-icon" sizes="57x57" href="assets/css/images/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="assets/css/images/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="assets/css/images/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="assets/css/images/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="assets/css/images/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="assets/css/images/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="assets/css/images/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="assets/css/images/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="assets/css/images/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="assets/css/images/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="assets/css/images/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="assets/css/images/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="assets/css/images/favicon/favicon-16x16.png">
        <link rel="manifest" href="assets/css/images/favicon/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="assets/css/images/favicon/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
	
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
		<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
	</head>
	<body id="top">

		<!-- Header -->
			<header id="header">
				<div class="content">
					<h1><a href="#">CUAC FM</a></h1>
					<p id="msg-header">Cargando...</p>
					<p><a id="button-header" href="#" class="button icon fa-chevron-down scrolly">Espera...</a></p>
					<p id="msg-subheader-name"></p>
					<p id="msg-subheader-date"></p>
				</div>
				<div class="image phone"><div class="inner"><img id="image-to-show" src="images/loading.jpg" alt="" /></div></div>
			</header>

			<section id="channel-container" class="wrapper special">
					<div>
					<p id="current-channel-text">La sala actual de jitsi de directo es: </p>
					<a id="current-channel" href="#" target="parent" target="_blank" class="button special icon fa-chrome">...</a>
					<br/>
					<br/>
					<ul class="actions">
					<li><input type="text" id="new-channel" name="new-channel" value="" placeholder="Introduce el nombre de la sala si es una diferente" /></li>
					<li><a id="new-channel-save" href="#" class="button special icon fa-save">Guardar	</a></li>
					</ul>
					</div>
			</section>

			<section id="one" class="wrapper style2 special">
					<p id="msg-to-show">Estamos cargando los datos actuales. Espera un momento...</p>
                    <ul class="actions">
                    	<li><a id="action-to-launch" href="#" class="button special icon fa-play">...</a></li>
                        <li><a id="action-to-launch-reset" href="#" class="button special icon fa-close">...</a></li>
					</ul>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
                	<li><a href="https://cuacfm.org/" class="icon fa-chrome"><span class="label">A nosa web</span></a></li>
					<li><a href="https://www.facebook.com/cuacfm" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
					<li><a href="https://twitter.com/cuacfm?lang=es" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
				</ul>
				<p class="copyright">&copy; CUAC FM basado en una plantilla de <a href="https://html5up.net/" target="_black">HTML5 UP</a></p>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>
				
			 <script type="text/javascript">
			 	var currentState = null;
			 	//live, preview, retransmission
			 	function loadDataFromJSON(pastState){
				   	 $.getJSON( "state.json", function(data) {
				   	 		if(pastState != data.showState){
				   	 			if(currentState != null){
				   	 				alert("Alguien modificó el estado. Revisa que todo sea correcto");
				   	 			}
				   	 			currentState = data.showState;
								var channelName = data.currentChannel;

							 	var msgHelp = "Haciendo click en Lanzar Previo verás una pantalla donde configurar el canal de jitsi. La página se recargará con el estado actual en uno segundos.";
							    var buttonText = "Lanzar Previo";
							    var imageUrl = "images/continuidad.jpg";
							    var linkAction = "updateStatus.php?status=preview&channel=" + channelName;
							    var resetAction = "updateStatus.php?status=retransmission&channel=CuacFMDirecto";
							    var headerTopeMessage = "Ahora Continuidad";
							    var headerLinkAction = "#one";
							    var headerLinkText = "Quiero hacer un directo";

							    $("#channel-container").hide();
								$("#action-to-launch-reset").hide();

								if(data.showState == "live"){
									msgHelp = "Puedes volver a activar la continuidad en este momento. La página se recargará con el estado actual en uno segundos.";
									buttonText = "Lanzar Continuidad";
							    	imageUrl = "images/directo.jpg";
							    	linkAction = resetAction;
							    	headerTopeMessage = "Ahora Directo";
							    	headerLinkAction = "#channel-container";
							    	headerLinkText = "Quiero poner la continuidad";
							    	$("#channel-container").show();
							    	$("#action-to-launch-reset").show();
							    	$("#new-channel").hide();
							    	$("#new-channel-save").hide();
								} else if(data.showState == "preview"){
									msgHelp = "Puedes lanzar el directo si vas emitir. No olvides volver por aquí al terminar. La página se recargará con el estado actual en uno segundos.";
							        buttonText = "Lanzar Directo";
							        imageUrl = "images/preview.jpg";
							        linkAction = "updateStatus.php?status=live&channel=" + channelName;
							        headerTopeMessage = "Ahora Continuidad";
							    	headerLinkAction = "#channel-container";
							    	headerLinkText = "Continuar";
							       $("#channel-container").show();
							       $("#action-to-launch-reset").show();
							       $("#new-channel").show();
							       $("#new-channel-save").show();
								}
								
								$("#msg-to-show").text(msgHelp);
								$("#action-to-launch").attr("href",linkAction);
								$("#action-to-launch").text(buttonText);
								$("#action-to-launch-reset").text("Resetear");
								$("#action-to-launch-reset").attr("href",resetAction);
								$("#image-to-show").attr("src",imageUrl);
								$("#current-channel").text(channelName);
								$("#current-channel").attr("href","https://meet.jit.si/" + channelName);
								$("#msg-header").text(headerTopeMessage);
								$("#msg-subheader-name").text("Último usuari@: " + data.lastUser);
								$("#msg-subheader-date").text("Última modificación: " + data.lastChangeDate);
								$("#button-header").text(headerLinkText);
								$("#button-header").attr("href",headerLinkAction);

								$( "#action-to-launch" ).click(function() {
								  var newValue = $("#new-channel").val();
								  if($("#new-channel").val()){
									linkAction = "updateStatus.php?status=live&channel=" + $.trim($("#new-channel").val());
									$("#action-to-launch").attr("href",linkAction);
								  }
								});

								$( "#new-channel-save" ).click(function() {
								  var actionToSave = "updateStatus.php?status=preview&channel=" + channelName;
								  if($("#new-channel").val()){
									actionToSave = "updateStatus.php?status=preview&channel=" + $("#new-channel").val();
								  }
								  $("#new-channel-save").attr("href",actionToSave);
								});
							}
						 });
				   	setTimeout(function() {
						loadDataFromJSON(currentState);
					}, 45000);
			   }

			   $(document).ready(function(e) {
			   	$.ajaxSetup({ cache: false });
				$("#channel-container").hide();
				$("#action-to-launch-reset").hide();
			   	setTimeout(function() {
					loadDataFromJSON(currentState);
				}, 1200);
			   });

			  
			</script>

	</body>
</html>
